## Сетевые пакеты. VLAN'ы. LACP

<img width="981" height="633" alt="image" src="https://github.com/user-attachments/assets/843cfbc9-4c54-4170-bfa5-22eb5e6bdc30" />

```ruby
host_bridge

	# Создаем Bridge-интерфейс
	$ sudo ip link add name br0 type brigge vlan_filtering 1 # Должен появится в списке: ip a

	# Добавляем интерфейсы eth1, eth2, eth3 в bridge
	$ sudo ip link set eth0 master br0
	$ sudo ip link set eth1 master br0
	$ sudo ip link set eth2 master br0

	# Добавить соответствие портов определенным VLAN
	$ sudo bridge vlan add dev eth0 vid 10 pvid untagged
	$ sudo bridge vlan add dev eth1 vid 20 pvid untagged
	$ sudo bridge vlan add dev eth2 vid 10
	$ sudo bridge vlan add dev eth2 vid 20

	# Поднимаем интерфейс br0
	$ sudo ip link set br0 up
	$ sudo bridge vlan show


host_vlan10
	inet eth0: 192.168.10.2/24


host_vlan20
	inet eth0: 192.168.20.2/24


host_srv
	# На базе одного физического интерфейса eth0 нужно создать два логических
	inet eth0: 

	$ sudo ip link add link eth0 name eth0.10 type vlan id 10
	$ sudo ip link add link eth0 name eth0.20 type vlan id 20

	$ sudo ip address add 192.168.10.10/24 dev eth0.10
	$ sudo ip address add 192.168.20.20/24 dev eth0.20
	$ sudo ip link set eth0.10 up
	$ sudo ip link set eth0.20 up
```

